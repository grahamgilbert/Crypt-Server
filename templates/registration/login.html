{% extends "base.html" %}

{% block content %}
    {% if user.is_authenticated %}
        <p>Welcome, {{ user.username }}.</p>
        <p><input class='btn' type="button" value="Logout" onClick="document.location.href='/logout';"/></p>
    {% else %}
        {% if form.errors %}
            <p>Authentication failure. There is no more information. Goodbye.</p>
        {% else %}
            <h2>Please log in.</h2>

            {% if OIDC_ENABLED %}
                <a class="btn btn-primary" href="{% url 'oidc_authentication_init' %}">Login through Okta</a>
            {% else %}
                <form method="post" action="{% url 'login' %}">
                    {% csrf_token %}
                    <table>
                        <tr>
                            <td>{{ form.username.label_tag }}</td>
                            <td>{{ form.username }}</td>
                        </tr>
                        <tr>
                            <td>{{ form.password.label_tag }}</td>
                            <td>{{ form.password }}</td>
                        </tr>
                    </table>

                    <input class='btn' type="submit" value="Log in" />
                    <input type="hidden" name="next" value="{{ next }}" />
                </form>
            {% endif %}
        {% endif %}
    {% endif %}
{% endblock %}
